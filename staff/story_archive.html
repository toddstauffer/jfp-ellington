{% extends "staff/base_staff.html" %}


{% block title %}{{ staffmember.get_full_name }} | Stories{% endblock %}
{% block body_class %}{{ block.super }} staff_story_archive{% endblock %}
{% block body_id %}staff_{{ staffmember.id }}{% endblock %}


{% block content_title %}
  <p class="back"><a href="../">Back to profile</a></p>
  <h2>{{ staffmember.get_full_name }}</h2>
  <h3>Stories by {{ staffmember.first_name }}</h3>
{% endblock %}


{% block content %}
  {% load mailfriend content cached_comments %}

  {% if story_list %}
    <div class="section section_wide">
      <h3>Recent Stories</h3>
      {% if story_list %}
        <div class="list story_list">
          {% for story in story_list %}
            {% render_template_for story in "includes/lists" %}
          {% endfor %}
        </div>
      {% endif %}
      <p><a class="button" href="./stories/">More stories</a></p>
    </div>
    {% if staffmember.user.blog_entries.count %}
      <div class="section section_end">
        <h3>Blog Entries</h3>
        <ul>
          {% for entry in staffmember.user.blog_entries.all %}
            {% get_cached_comment_count for entry as comment_count %}
            <li{% if forloop.last %} class="last"{% endif %}><a href="{{ entry.get_absolute_url }}">{{ entry.title|capfirst }}</a>
              {% if comment_count %}<small>{{ comment_count }} comment{{ comment_count|pluralize }}</small>{% endif %}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endif %}

  {% include "includes/pagination.html" %}
{% endblock %}
